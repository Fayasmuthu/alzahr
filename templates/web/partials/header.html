{% load static %}

<!-- Header Start -->
<header class="pb-md-0 pb-0">

    <div class="top-nav top-header sticky-header">
        <div class="container-fluid-lg">
            <div class="row">
                <div class="col-12">
                    <div class="navbar-top">
                        <button class="navbar-toggler d-xl-none d-inline navbar-menu-button" type="button"
                            data-bs-toggle="offcanvas" data-bs-target="#primaryMenu">
                            <span class="navbar-toggler-icon">
                                <i class="fa-solid fa-bars"></i>
                            </span>
                        </button>
                        <a href="{% url "web:index" %}" class="web-logo nav-logo">
                            <img src="{% static 'web/assets/images/logo/logo-blue-png.png' %}"
                                class="img-fluid blur-up lazyload" alt="">
                        </a>

                        <div class="middle-box">


                            <div class="search-box">
                                <form method="GET" action="{% url 'web:search' %}">
                                    <div class="input-group">
                                        <input type="search" class="form-control" name="q" value="{{ query }}"
                                            placeholder="I'm searching for...">
                                        <button class="btn" type="submit" id="button-addon2">
                                            <i data-feather="search"></i>
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>

                        <div class="rightside-box">
                            <div class="search-full">
                                <div class="input-group">
                                    <span class="input-group-text">
                                        <i data-feather="search" class="font-light"></i>
                                    </span>
                                    <input type="text" class="form-control search-type" placeholder="Search here..">
                                    <span class="input-group-text close-search">
                                        <i data-feather="x" class="font-light"></i>
                                    </span>
                                </div>
                            </div>
                            <ul class="right-side-menu">
                                <li class="right-side">
                                    <div class="delivery-login-box">
                                        <div class="delivery-icon">
                                            <div class="search-box">
                                                <i data-feather="search"></i>
                                            </div>
                                        </div>
                                    </div>
                                </li>



                                <li class="right-side">
                                    <a href="{% url "orders:wishlist" %}"
                                        class="btn p-0 position-relative header-wishlist">
                                        <span class="position-absolute top-0 start-100 translate-middle badge"
                                            id="header_wishlist_count">{{ wishlist_count }}</span>
                                        <i data-feather="heart"></i>
                                    </a>
                                </li>



                                <li class="right-side onhover-dropdown">
                                    <a class="logo-white" href="javascript:volid(0)" class="header-icon bag-icon">
                                        <i data-feather="user"></i>
                                    </a>
                                    {% if request.user.is_authenticated %}
                                    <div class="delivery-detail">
                                        <h6 class="logo-white" >Hello,</h6>
                                        <h5 class="logo-white">My {{user.username}}</h5>
                                    </div>


                                    <div class="onhover-div onhover-div-login">
                                        <ul class="user-box-name">

                                            <li class="product-box-contain d-none">
                                                <a href="javascript:volid(0)">My Account</a>
                                            </li>
                                            <li class="product-box-contain">
                                                <form action="{% url 'auth_logout' %}" method="post">
                                                    {% csrf_token %}
                                                    <i class="iconly-Logout icli"></i>
                                                    <button type="submit"
                                                        class="menu-link menu-link_us-s logout-btn">Logout</button>
                                                </form>
                                                {% else %}
                                                <i class="iconly-Login icli"></i>
                                                <a class="logo-white" href="{% url 'auth_login' %}">Log In</a>
                                                {% endif %}

                                            </li>
                                        </ul>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container-fluid header-nav-sm-off">
        <div class="row">
            <div class="col-12">
                <div class="header-nav">
                    <div class="header-nav-left my-1">
                        <button class="dropdown-category">
                            <i data-feather="align-left"></i>
                            <span>Categories</span>
                        </button>

                        <div class="category-dropdown">
                            <div class="category-title">
                                <h5>Categories</h5>
                                <button type="button" class="btn p-0 close-button text-content">
                                    <i class="fa-solid fa-xmark"></i>
                                </button>
                            </div>

                            <ul class="category-list">
                                {% for category in categories %}
                                <li class="onhover-category-list">
                                    <a href='{% url "web:shop" %}?category={{ category.slug }}'
                                        class="category-name">
                                        <img src="{{ category.icon_image.url }}" alt="">
                                        <h6>{{ category.title }}</h6>
                                        <i class="fa-solid fa-angle-right"></i>
                                    </a>

                                    <div class="onhover-category-box">
                                        <!-- Display subcategories for each category -->
                                        {% for subcategory in subcategories %}
                                        {% if subcategory.category == category %}
                                        <div class="list-1">
                                            <div class="category-title-box">
                                                <h5>{{ subcategory.title }}</h5>
                                            </div>
                                            <ul>
                                                {% for product_type in product_type %}
                                                {% if product_type.Subcategory == subcategory %}
                                                <li>
                                                    <a
                                                        href="{% url 'web:shop' %}?product_type={{product_type.slug}}">
                                                        {{ product_type.title }}</a>
                                                </li>
                                                {% endif %}
                                                {% endfor %}
                                            </ul>
                                        </div>
                                        {% endif %}
                                        {% endfor %}
                                    </div>
                                </li>
                                {% endfor %}


                            </ul>
                        </div>
                    </div>

                    <div class="header-nav-middle scrollmenu ">
                        <div class="main-nav navbar navbar-expand-xl navbar-light navbar-sticky ">
                            <div class="offcanvas offcanvas-collapse order-xl-2 " id="primaryMenu">
                                <div class="offcanvas-header navbar-shadow">
                                    {% comment %} <h5>Menu</h5> {% endcomment %}
                                    <a href="{% url "web:index" %}" class="web-logo nav-logo">
                                        <img src="{% static 'web/assets/images/logo/logo-blue-png.png' %}"
                                            class="img-fluid blur-up lazyload" style="width: 125px;" alt="">
                                    </a>
                                    <button class="btn-close lead" type="button" data-bs-dismiss="offcanvas"></button>
                                </div>

                                <div class="offcanvas-body ">
                                    <ul class="navbar-nav ">
                                        <li class="nav-item ">
                                            <a class="nav-link ps-xl-2 ps-0" href="{% url 'web:index' %}">Home</a>
                                        </li>
                                        {% comment %} {% for category in categories %}
                                        {% for sub in category.subcategories.all %}
                                        <li class="nav-item">
                                            <a class="nav-link ps-xl-2 ps-0" href="{% url 'web:shop' %}?subcategories={{ sub.slug }}'">{{ sub.title }}</a>
                                        </li>
                                        {% endfor %}
                                        {% endfor %} {% endcomment %}
                                        <li class="nav-item ">
                                            <a class="nav-link ps-xl-2 ps-0" href="#">Shop</a>
                                            {% comment %} <a class="nav-link ps-xl-2 ps-0" href="{% url 'web:shop' %}">Shop</a> {% endcomment %}
                                        </li>

                                        <li class="nav-item ">
                                            <a class="nav-link ps-xl-2 ps-0" href="#">Contact</a>
                                            {% comment %} <a class="nav-link ps-xl-2 ps-0" href="{% url 'web:contact' %}">Contact</a> {% endcomment %}
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    

                    <div class="header-nav-right d-none">
                        <button class="btn deal-button" data-bs-toggle="modal" data-bs-target="#deal-box" >
                        {% comment %} <button class="btn deal-button" data-bs-toggle="modal" data-bs-target="#deal-box" onclick="location.href = '{% url "web:contact" %}';"> {% endcomment %}
                            <i data-feather="phone"></i>
                            <span>Contact</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
<!-- Header End -->

    <!-- mobile fix menu start -->
    <div class="mobile-menu d-md-none d-block mobile-cart">
        <ul>
            <li class="active">
                <a href="{% url "web:index" %}">
                    <i class="iconly-Home icli"></i>
                    <span>Home</span>
                </a>
            </li>

            <li class="mobile-category ">
                <a href="">
                {% comment %} <a href="{% url "web:cn" %}"> {% endcomment %}
                    <i class="iconly-Category icli"></i>
                    <span>Category</span>
                </a>
            </li>

            <li>
                <a href="#" class="search-box">
                {% comment %} <a href="{% url "web:search" %}" class="search-box"> {% endcomment %}
                    <i class="iconly-Search icli"></i>
                    <span>Search</span>
                </a>
            </li>

            <li>
                <a href="{% url "orders:wishlist" %}" class="notifi-wishlist">
                    <i class="iconly-Heart icli"></i>
                    <span>My Wish</span>
                </a>
            </li>

            <li>
                <a href="#">
                {% comment %} <a href="{% url "web:shop" %}"> {% endcomment %}
                    <i class="iconly-Bag-2 icli fly-cate"></i>
                    <span>Shop</span>
                </a>
            </li>
        </ul>
    </div>
    <!-- mobile fix menu end -->
